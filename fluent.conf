<source>
  @type kafka_group

  brokers kafkabroker:9092
  consumer_group web-app
  topics web-app-log
  format json
  retry_emit_limit 5
  use_record_time true
  time_format "%Y-%m-%d %H:%M:%S"

  # ruby-kafka consumer options
  max_bytes               1048576
  max_wait_time           10
  start_from_beginning    false
</source>

<match *.*>
  type elasticsearch
  logstash_format true
  host "elasticsearch"
  port 9200
  flush_interval 5s
</match>

<match *>
  type elasticsearch
  host "elasticsearch"
  port 9200
  flush_interval 5s
  logstash_format true
  logstash_prefix matrixlog
  type_name matrixlog
</match>